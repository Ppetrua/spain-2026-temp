<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta name="robots" content="noindex, nofollow">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 å®‰é”é­¯è¥¿äºå®Œæ•´è¡Œç¨‹è¡¨</title>
    <style>
        /* --- å€åŸŸåˆ†è‰²æ¨£å¼ --- */

        /* æ ¼æ‹‰ç´é” */
        .area-granada summary { 
            background-color: #c86a5a; 
            color: white; 
        }
        .area-granada .content { 
            background-color: var(--granada-bg); 
        }
        
        /* é¾é” */
        .area-ronda summary { 
            background-color: #5FA3A2; 
            color: white; 
        }
        .area-ronda .content { 
            background-color: var(--ronda-bg); 
        }
        
        /* å¡ç¶­åˆ©äº */
        .area-sevilla summary { 
            background-color: #E2B857; 
            color: white; 
        }
        .area-sevilla .content { 
            background-color: var(--sevilla-bg); 
        }
        body { font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; line-height: 1.6; max-width: 900px; margin: auto; padding: 20px; background: #fdfdfd; color: #333; }
        
        /* æ‡¸æµ®æŒ‰éˆ•ç¾¤çµ„ */
        #floating-group {
            position: fixed; bottom: 25px; right: 20px; z-index: 9999;
            display: flex; flex-direction: column; align-items: flex-end;
        }
        
        .float-btn {
            width: 54px; height: 54px; border-radius: 50%; border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; text-decoration: none; margin-bottom: 18px;
            -webkit-tap-highlight-color: transparent;
        }
        
        #money-btn { background: #27ae60; color: white; }
        #translate-btn { background: #4285F4; color: white; }
        #weather-toggle { background: #34495e; color: white; margin-bottom: 0; }

        /* å¤©æ°£è¦–çª— */
        #weather-widget {
            width: 180px; background: white; border: 2px solid #34495e; border-radius: 12px;
            padding: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-bottom: 15px;
            display: none; font-size: 0.85em;
        }

        /* è¨˜å¸³ Modal å„ªåŒ– */
        #calc-modal {
            display: none; position: fixed; z-index: 10000;
            left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.8);
        }

        .modal-content {
            background-color: #fefefe; position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            padding: 20px; border-radius: 20px; width: 85%; max-width: 360px;
            max-height: 85vh; display: flex; flex-direction: column; overflow-y: auto;
        }

        .close-btn { align-self: flex-end; font-size: 30px; font-weight: bold; cursor: pointer; color: #999; }

        /* è‡ªå®šç¾©è¡¨å–®æ¨£å¼ */
        .input-group { margin-bottom: 12px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 0.9em; }
        .input-group input, .input-group select {
            width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px;
        }
        .checkbox-group { display: flex; gap: 10px; flex-wrap: wrap; }
        .submit-btn {
            width: 100%; padding: 12px; background: #27ae60; color: white;
            border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px;
        }

        /* è¡Œç¨‹æ¨£å¼ */
        details { margin-bottom: 12px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        summary { padding: 15px; font-size: 1.1em; font-weight: bold; cursor: pointer; list-style: none; }
        .area-granada summary { background-color: #C86A5A; color: white; }
        .area-granada .content { background-color: var(--granada-bg); }
        .content { padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; background: white; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: left; }
        .note-box { background: #ffebee; border-left: 4px solid #c62828; padding: 10px; color: #c62828; font-weight: bold; margin: 10px 0; }
        .map-btn { display: inline-block;      /* è®“æ¡†å…·æœ‰å€å¡Šå±¬æ€§ä½†ç¶­æŒè¡Œå…§æµå‹• */
                    border: 1px solid #1565c0;  /* è—è‰²é‚Šæ¡† */
                    background-color: #f0f7ff;  /* æ·¡æ·¡çš„åº•è‰² */
                    color: #1565c0;
                    text-decoration: none;
                    border-radius: 6px;         /* åœ“è§’ */
                    padding: 3px 8px;           /* å¢åŠ ä¸€é»é»é»æ“Šç©ºé–“ */
                    font-size: 0.9em;
                    font-weight: bold;
                    
                    /* æ ¸å¿ƒä¿®æ­£ï¼šå¼·åˆ¶åœ¨æ¡†å…§æ›è¡Œ */
                    word-break: break-word;     /* ç•¶å¯¬åº¦ä¸è¶³æ™‚ï¼Œåœ¨å–®å­—é–“æˆ–å–®å­—å…§æ›è¡Œ */
                    white-space: normal;        /* å…è¨±æ–‡å­—æŠ˜è¡Œ */
                    line-height: 1.4;           /* æ›è¡Œå¾Œçš„è¡Œé–“è· */
                    max-width: 100%;            /* ç¢ºä¿ä¸æœƒè¶…å‡ºè¡¨æ ¼æ ¼å­çš„å¯¬åº¦ */
                    box-sizing: border-box;     /* é‚Šæ¡†ä¸æ’å¤§å¯¬åº¦ */
                    
                    vertical-align: middle;
                }
                
                /* æ‰‹æ©Ÿé»æ“Šæ•ˆæœ */
                .map-btn:active { background-color: #d1e9ff;
                }

    </style>
</head>
<body>

<div id="floating-group">
    <div id="calc-modal" onclick="handleOutsideClick(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="toggleMoney()">Ã—</span>
            <h3 style="margin:0 0 15px 0; text-align:center;">ğŸ’° æ—…éŠè¨˜å¸³</h3>
            
            <div class="input-group">
                <label>é‡‘é¡ (â‚¬)</label>
                <input type="number" id="amt" placeholder="0.00" inputmode="decimal">
            </div>
            
            <div class="input-group">
                <label>åç›®</label>
                <input type="text" id="item" placeholder="æ™šé¤ã€è¶…å¸‚ç­‰">
            </div>

            <div class="input-group">
                <label>æ”¯ä»˜æ–¹å¼</label>
                <select id="method" onchange="checkMethod()">
                    <option value="ç¾é‡‘">ğŸ’µ ç¾é‡‘</option>
                    <option value="ä¿¡ç”¨å¡">ğŸ’³ ä¿¡ç”¨å¡</option>
                </select>
            </div>

            <div id="card-owner-group" class="input-group" style="display:none;">
                <label>èª°çš„å¡ï¼Ÿ</label>
                <select id="cardOwner">
                    <option value="Yvonne">Yvonne</option>
                    <option value="Jacky">Jacky</option>
                    <option value="åª½åª½">åª½åª½</option>
                </select>
            </div>

            <div class="input-group">
                <label>èª°è¦åˆ†ï¼Ÿ</label>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="split" value="Yvonne" checked> Yvonne</label>
                    <label><input type="checkbox" name="split" value="Jacky" checked> Jacky</label>
                    <label><input type="checkbox" name="split" value="åª½åª½" checked> åª½åª½</label>
                </div>
            </div>

            <div class="input-group">
                <label>ç™¼ç¥¨ç…§ç‰‡ (å¯æ‹ç…§)</label>
                <input type="file" id="receiptImg" accept="image/*" capture="camera">
            </div>

            <button class="submit-btn" onclick="sendData()" id="sendBtn">ç¢ºèªé€å‡º</button>
        </div>
    </div>

    <div id="weather-widget">
        <h4 style="margin:0; color: #e67e22;">ğŸŒ ç•¶åœ°å³æ™‚å¤©æ°£</h4>
        <div id="weather-info">è¼‰å…¥ä¸­...</div>
    </div>

    <button class="float-btn" id="money-btn" onclick="toggleMoney()">ğŸ’°</button>
    <a href="googleapp://" class="float-btn" id="translate-btn">ğŸ“¸</a>
    <button class="float-btn" id="weather-toggle" onclick="toggleWeather()">ğŸŒ¤ï¸</button>
</div>

<h1>ğŸ‡ªğŸ‡¸ 2026 å®‰é”é­¯è¥¿äºè¡Œç¨‹çµ±æ•´</h1>

<details class="area-granada">
    <summary>2/13 (äº”) å‡ºç™¼ï¼šå°åŒ— â†’ æœæ‹œ</summary>
    <div class="content">
        <h3>âœˆï¸ èˆªç­æ®µè½ 1</h3>
        <table class="transport-table">
            <tr><th>é …ç›®</th><th>ç´°ç¯€</th></tr>
            <tr><td>èˆªç­</td><td>é˜¿è¯é…‹èˆªç©º EK367</td></tr>
            <tr><td>è·¯ç·š</td><td>å°åŒ— (TPE) äºŒèˆªå»ˆ â†’ æœæ‹œ (DXB)</td></tr>
            <tr><td>æ™‚é–“</td><td>23:00 èµ·é£› (é è¨ˆ 20:00 æŠµé”æ©Ÿå ´)</td></tr>
            <tr><td>è€—æ™‚</td><td>ç´„ 9h 55m</td></tr>
        </table>
    </div>
</details>

<details class="area-granada">
    <summary>2/14 (å…­) è½‰æ©Ÿï¼šæœæ‹œ â†’ é¦¬å¾·é‡Œ â†’ æ ¼æ‹‰ç´é”</summary>
    <div class="content">
        <h3>â³ è½‰æ©Ÿè³‡è¨Š (æœæ‹œ)</h3>
        <p>æ™‚é–“ï¼š04:55 æŠµé” - 07:25 èµ·é£› (åœç•™ç´„ 2h 30m)</p>
        
        <h3>âœˆï¸ èˆªç­æ®µè½ 2</h3>
        <table class="transport-table">
            <tr><th>é …ç›®</th><th>ç´°ç¯€</th></tr>
            <tr><td>èˆªç­</td><td>é˜¿è¯é…‹èˆªç©º EK141 (ä¸‰èˆªå»ˆ)</td></tr>
            <tr><td>è·¯ç·š</td><td>æœæ‹œ (DXB) â†’ é¦¬å¾·é‡Œ (MAD)</td></tr>
            <tr><td>æ™‚é–“</td><td>07:25 èµ·é£› â†’ 12:40 æŠµé”</td></tr>
            <tr><td>è€—æ™‚</td><td>ç´„ 8h 15m</td></tr>
            <tr><td>é¤é»</td><td>èˆªç¨‹ä¸­åŒ…å«æ—©é¤èˆ‡åˆé¤</td></tr>
        </table>

        <div class="note-box">âš ï¸ æŠµé”é¦¬å¾·é‡Œå¾Œï¼Œè«‹æ¥çºŒä¸‹æ–¹çš„æ©Ÿå ´å·´å£« [203] å‰å¾€ Atocha è»Šç«™ã€‚</div>

        <strong>ğŸ  ä½å®¿ï¼šH&H Suite Mirador de Granada</strong><br>
        ğŸ“ <a class="map-btn" href="https://maps.app.goo.gl/fzYnJsuRd5uZCs577" target="_blank">Google Map</a> <a class="map-btn" href="https://secure.booking.com/app_link/myreservations.en.html?stid=325542&bn=6074259762&aid=332731" target="_blank">Booking è¨‚å–®</a><br>
        
        <h3>ğŸš ç•¶åœ°äº¤é€šéŠœæ¥</h3>
        <table class="transport-table">
            <tr><th>è·¯ç·š</th><th>æ™‚é–“</th><th>è²»ç”¨/è€—æ™‚</th></tr>
            <tr><td>ğŸšŒæ©Ÿå ´å·´å£« [203]</td><td>12:40å¾Œ</td><td>â‚¬5 / 40min (è‡³ Atocha ç«™)</td></tr>
            <tr><td>ğŸš„ ç«è»Š Alvia 02366</td><td>16:10-19:55</td><td>â‚¬50 / 3h 45m (è‡³ Granada)</td></tr>
            <tr><td>ğŸšŒå…¬è»Š [11]</td><td>20:15</td><td>ç«è»Šç«™ â†’ ä½å®¿é» (16min)</td></tr>
        </table>
    </div>
</details>

<details class="area-granada">
    <summary>2/15 (æ—¥) é˜¿çˆ¾ç½•å¸ƒæ‹‰å®®</summary>
    <div class="content">
        <div class="note-box">âš ï¸ 8:30å‰æŠµé”é ˜ç¥¨ï¼Œ9:30æº–æ™‚å…¥å ´ã€‚éœ€å¸¶è­·ç…§ï¼Œå–®æ¬¡é€²å ´ã€‚</div>
        <h3>ğŸš å…¬è»Šç§»å‹•ç´°ç¯€</h3>
        <table>
            <tr><td>1. æ­ä¹˜ [9] è™Ÿç·š</td><td>Cno. Ronda 153 â†’ Recogidas 5</td></tr>
            <tr><td>2. è½‰ä¹˜ [C30] è™Ÿç·š</td><td>Plaza Isabel la CatÃ³lica 4 â†’ Alhambra</td></tr>
        </table>
        ğŸ“ <a class="map-btn" href="https://maps.app.goo.gl/3YNBSKNspteCP3J77" target="_blank">Google Map å°è¦½</a><br>

<a href="images/map01.jpg" target="_blank" style="display: block; text-align: center; text-decoration: none;">
    <img src="images/map01.jpg" 
         alt="è¡Œç¨‹åœ°åœ–" 
         style="width: 100%; max-width: 600px; border-radius: 8px; border: 1px solid #ddd; margin: 15px auto; cursor: zoom-in; display: inline-block;">
</a>
<div style="display: flex; justify-content: center; gap: 10px; margin: 20px 0; text-align: center;">
    <a href="https://dl.dropboxusercontent.com/scl/fi/yvyujdm854klcdqteztg0/Patronato-de-la-Alhambra_H0LGBBG_Yvonne.pdf?rlkey=mybsui7puikbnss3dyp1wc5hx" 
       target="_blank" 
       style="flex: 1; max-width: 100px; background: #3498db; color: white; padding: 15px 5px; border-radius: 10px; text-decoration: none; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #2980b9;">
        <span style="font-size: 1.2em;">ğŸŸï¸</span><br>Yvonne
    </a>

    <a href="https://dl.dropboxusercontent.com/scl/fi/u7t6nxz47ztki95xkr5iq/Patronato-de-la-Alhambra_H0LGBBG_Jacky.pdf?rlkey=qfj7i5i0g5tbemsmzzc14qd8i" 
       target="_blank" 
       style="flex: 1; max-width: 100px; background: #2ecc71; color: white; padding: 15px 5px; border-radius: 10px; text-decoration: none; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #27ae60;">
        <span style="font-size: 1.2em;">ğŸŸï¸</span><br>Jacky
    </a>

    <a href="https://dl.dropboxusercontent.com/scl/fi/egsiyb75c9buajfzccb9u/Patronato-de-la-Alhambra_H0LGBBG_Mom.pdf?rlkey=ju7k6iu04ihmd6l5rcq2bcd9r" 
       target="_blank" 
       style="flex: 1; max-width: 100px; background: #e67e22; color: white; padding: 15px 5px; border-radius: 10px; text-decoration: none; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #d35400;">
        <span style="font-size: 1.2em;">ğŸŸï¸</span><br>åª½åª½
    </a>
</div>
        
<h3>ğŸ½ï¸ é¤é£Ÿå®‰æ’</h3>
        <table>
            <tr><th style="width: 25%;">æ—©é¤</th><td>ä½å®¿è™•è‡ªç†</td></tr>
            <tr><th>åˆé¤</th><td>è‡ªå‚™ï¼ˆå‰ä¸€å¤©æº–å‚™ä¸‰æ˜æ²»ç­‰ï¼Œæ™¯é»å…§ç”¨é¤ï¼‰</td></tr>
            <tr><th>æ™šé¤</th><td>å¸‚å€è‡ªç”±ç™¼æ®</td></tr>
        </table>
        
<h3>ğŸ’¡ å¾ŒçºŒæ–¹æ¡ˆ (ç´„14:30å®Œæˆåƒè§€)</h3>
    <ul>
        <li><strong>æ–¹æ¡ˆ Aï¼š</strong> ä¼‘æ¯è¡Œç¨‹ã€‚å›ä½å®¿åœ°ä¼‘æ•´ï¼Œæ™šä¸Šå†å‡ºé–€ã€‚</li>
        <li><strong>æ–¹æ¡ˆ Bï¼š</strong> åƒè§€æ ¼æ‹‰ç´é”ä¸»æ•™å ‚ (Cathedral) èˆ‡ çš‡å®¶ç¦®æ‹œå ‚ (Capilla Real) *é–€ç¥¨ç´„ â‚¬5ã€‚
    </ul>
    </div>
</details>
    
<details class="area-granada">
    <summary>2/16 (ä¸€) é˜¿çˆ¾æ‹œè¾›å€</summary>
    <div class="content">
        <h3>ğŸš å…¬è»Šç§»å‹•ç´°ç¯€</h3>
        <table>
            <tr><td>1. æ­ä¹˜ [4] è™Ÿç·š</td><td>Ctra. MÃ¡laga - Villa Pineda â†’ Gran VÃ­a 7-Catedral</td></tr>
            <tr><td>2. è½‰ä¹˜ [C34] è™Ÿç·š</td><td>Sacromonte-Puente Mariano â†’ Cno.del Sacromonte 1-Peso de la Harina</td></tr>
        </table>
        ğŸ“ <a class="map-btn" href="https://maps.app.goo.gl/9vQHrga3mFk1iq1B6" target="_blank">Google Map å°è¦½</a><br>
<a href="images/map02.png" target="_blank" style="display: block; text-align: center; text-decoration: none;">
    <img src="images/map02.png" 
         alt="è¡Œç¨‹åœ°åœ–" 
         style="width: 100%; max-width: 600px; border-radius: 8px; border: 1px solid #ddd; margin: 15px auto; cursor: zoom-in; display: inline-block;">
</a>
        
<table>
            <tr>
                <th>æ™‚æ®µ</th>
                <th>åœ°é»</th>
                <th>å‚™è¨»</th>
            </tr>
            <tr>
                <td rowspan="5">ä¸Šåˆ</td>
                <td><a class="map-btn" href="https://maps.app.goo.gl/G62gqmkwpep7t3B28" target="_blank">1. Carrera del Darro</a></td>
                <td>èµ·å§‹é»</td>
            </tr>
            <tr>
                <td><a class="map-btn" href="https://www.google.com/maps/search/?api=1&query=El+BaÃ±uelo+Granada" target="_blank">2. El BaÃ±uelo</a></td>
                <td>é˜¿æ‹‰ä¼¯æµ´å ´éºå€</td>
            </tr>
            <tr>
                <td><a class="map-btn" href="https://maps.app.goo.gl/o9JecNZa9b6zqvn2A" target="_blank">3. Paseo de los Tristes</a></td>
                <td>18010 Granada</td>
            </tr>
            <tr>
                <td><a class="map-btn" href="https://maps.app.goo.gl/vEbH4MNCBqcJusKQ8" target="_blank">4. Sacromonte</a></td>
                <td>C. Verea de Enmedio, 55</td>
            </tr>
            <tr>
                <td><a class="map-btn" href="https://maps.app.goo.gl/ncrxuVqzNFQAmptm9" target="_blank">5. AbadÃ­a del Sacromonte</a></td>
                <td>ä¿®é“é™¢<b>é–€ç¥¨ 7â‚¬</b> è§€æ™¯å¹³å°</td>
            </tr>
            <tr>
                <td rowspan="4">ä¸‹åˆ</td>
                <td>ä¸‹å±±äº¤é€š</td>
                <td>æ­¥è¡Œ&æ­ä¹˜ <b>C34 å·´å£«</b> (Cno.del Sacromonte 1â†’Peso de la Harina)</td>
            </tr>
            <tr>
                <td>é˜¿çˆ¾æ‹œè¾›å€è¡—é“</td>
                <td>éš¨æ„é€›é€›ï¼Œé«”é©—ç™½è‰²å··å¼„</td>
            </tr>
            <tr>
                <td><a class="map-btn" href="https://www.google.com/maps/search/?api=1&query=Mirador+de+San+NicolÃ¡s+Granada" target="_blank">8. è–å°¼å¤æ‹‰æ–¯è§€æ™¯å°</a></td>
                <td><b>18:30 æ—¥è½</b></td>
            </tr>
            <tr>
                <td><a class="map-btn" href="https://maps.app.goo.gl/La4vRDaPfdaXwp9WA" target="_blank">9. é˜¿æ‹‰ä¼¯è¡—</a></td>
                <td>C. CaldererÃ­a Nueva (èŒ¶é¤¨/æ‰‹å·¥è—)</td>
            </tr>
        </table>
<h3>ğŸ’¡ æ³¨æ„äº‹é …</h3>
    <ul>
        <li>El BaÃ±ueloï¼ˆé˜¿æ‹‰ä¼¯æµ´å ´ï¼‰ã€AbadÃ­a del Sacromonteï¼ˆè–å±±ä¿®é“é™¢ï¼‰éœ€è¦é–€ç¥¨</li>          
</details>

<details class="area-ronda">
    <summary>2/19 (å››) æ ¼æ‹‰ç´é” â†’ é¾é”</summary>
    <div class="content">
        <strong>ğŸ  ä½å®¿ï¼šApartamento San JosÃ©</strong><br>
        ğŸ“ <a class="map-btn" href="https://secure.booking.com/app_link/myreservations.en.html?stid=325542&bn=5778384460&aid=332731" target="_blank">Booking è¨‚å–®</a><br>
        <p>äº¤é€šï¼šæ­ä¹˜å·´å£«è½‰ç«è»Šï¼Œ16:33 æŠµé”é¾é”è»Šç«™ï¼Œæ­¥è¡Œ 9 åˆ†é˜æŠµé”ã€‚</p>
    </div>
</details>

<details class="area-ronda">
    <summary>2/20 (äº”) é¾é”ï¼šæ–°æ©‹èˆ‡é¬¥ç‰›å ´</summary>
    <div class="content">
        <p>è¡Œç¨‹ï¼šå¡”éœæ—è”­æ­¥é“ã€é¬¥ç‰›å ´ã€ç´¢ç§‘ç¾…æ•™å ‚ã€æ–°æ©‹å…§éƒ¨åƒè§€ã€‚</p>
    </div>
</details>

<details class="area-ronda">
    <summary>2/21 (å…­) é¾é”ï¼šè€æ©‹èˆ‡é˜¿æ‹‰ä¼¯æµ´å ´</summary>
    <div class="content">
        <p>è¡Œç¨‹ï¼šè€æ©‹ã€è€åŸå€ã€é˜¿æ‹‰ä¼¯æµ´å ´ã€‚</p>
        <p>ğŸš— 14:00 æ­è¨ˆç¨‹è»Šå‰å¾€å¡ç¶­åˆ©äº (â‚¬180/3äºº)ã€‚</p>
    </div>
</details>

<details class="area-ronda">
    <summary>2/22 (æ—¥) é¾é”/å¡ç¶­åˆ©äº</summary>
    <div class="content">
        <p>ä¾è¡Œç¨‹èª¿æ•´ï¼Œå‰å¾€å¡ç¶­åˆ©äºä½å®¿é»ã€‚</p>
    </div>
</details>

<details class="area-sevilla">
    <summary>2/23 - 2/27 å¡ç¶­åˆ©äºæ·±åº¦æ—…éŠ</summary>
    <div class="content">
        <p>åŒ…å«å¡ç¶­åˆ©äºå¤§æ•™å ‚ã€ç‹å®®ã€è¥¿ç­ç‰™å»£å ´ç­‰é‡é»è¡Œç¨‹ã€‚</p>
    </div>
</details>

<details class="area-sevilla">
    <summary>2/28 (å…­) å¡ç¶­åˆ©äº â†’ é¦¬å¾·é‡Œ â†’ è¿”ç¨‹ (è£œè¶³)</summary>
    <div class="content">
        <h3>ğŸ  å¡ç¶­åˆ©äº Check Out</h3>
        <table>
            <tr><th>å·¥å…·</th><th>è·¯ç·š</th><th>æ™‚é–“</th><th>å‚™è¨»</th></tr>
            <tr><td>ğŸš„ ç«è»Š</td><td>Sevilla Santa Justa â†’ Madrid Atocha</td><td>08:57 - 11:45</td><td>Jacky è³¼ç¥¨</td></tr>
            <tr><td>ğŸšŒ å·´å£«</td><td>Atocha ç«™ â†’ æ©Ÿå ´ T4</td><td>12:30 å·¦å³</td><td>æ©Ÿå ´å¿«é€Ÿå·´å£«</td></tr>
            <tr><td>âœˆï¸ é£›æ©Ÿ</td><td>MAD (EK142)</td><td>14:25 èµ·é£›</td><td>å‰å¾€æœæ‹œ</td></tr>
        </table>
        <div class="note-box">æ³¨æ„ï¼šè«‹å‹™å¿…æ–¼ 12:40 å‰æŠµé”æ©Ÿå ´æ«ƒæª¯è¾¦ç†ç™»æ©Ÿã€‚</div>
    </div>
</details>

<script>
    // 1. è¨˜å¸³è¦–çª—é‚è¼¯
    function toggleMoney() {
        const modal = document.getElementById('calc-modal');
        modal.style.display = (modal.style.display === 'block') ? 'none' : 'block';
    }

    function checkMethod() {
        const method = document.getElementById('method').value;
        document.getElementById('card-owner-group').style.display = (method === 'ä¿¡ç”¨å¡') ? 'block' : 'none';
    }

    function handleOutsideClick(event) {
        if (event.target === document.getElementById('calc-modal')) toggleMoney();
    }

    async function sendData() {
    const btn = document.getElementById('sendBtn');
    // è«‹ç¢ºèªä¸‹æ–¹ç¶²å€æ˜¯ä½ ã€Œæœ€æ–°éƒ¨ç½²ã€å¾Œå–å¾—çš„ Web App URL
    const url = 'https://script.google.com/macros/s/AKfycbwyvXFrF8A6yqy1wYqCanzk4GH6Xn8SyCQKxP17R_Bco8At6r2R1curAggrag5lR7X5Vw/exec'; 
    
    const amt = document.getElementById('amt').value;
    const item = document.getElementById('item').value;
    if (!amt || !item) { alert('è«‹å¡«å¯«é‡‘é¡èˆ‡åç›®'); return; }

    btn.innerText = 'å‚³é€ä¸­...';
    btn.disabled = true;

    const splitPeople = Array.from(document.querySelectorAll('input[name="split"]:checked')).map(el => el.value).join(', ');
    const fileInput = document.getElementById('receiptImg');
    let base64Image = "";
    let fileType = "";

    try {
        if (fileInput.files.length > 0) {
            const file = fileInput.files[0];
            fileType = file.type;
            base64Image = await new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result.split(',')[1]);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        const payload = {
            amount: amt,
            item: item,
            method: document.getElementById('method').value,
            cardOwner: document.getElementById('method').value === 'ä¿¡ç”¨å¡' ? document.getElementById('cardOwner').value : "N/A",
            splitPeople: splitPeople,
            image: base64Image,
            type: fileType
        };

        // é—œéµä¿®æ­£ï¼šæ”¹ç”¨ text/plain ç¹é CORS é æª¢
        await fetch(url, {
            method: 'POST',
            mode: 'no-cors', 
            headers: { 'Content-Type': 'text/plain' },
            body: JSON.stringify(payload)
        });

        // å› ç‚º no-cors æ¨¡å¼ç„¡æ³•å–å¾—å›å‚³å€¼ï¼Œæˆ‘å€‘å‡è¨­æ²’å™´ error å°±æ˜¯æˆåŠŸ
        alert('è¨˜å¸³è³‡æ–™å·²é€å‡ºï¼\n(è«‹è‡³è©¦ç®—è¡¨ç¢ºèª)');
        toggleMoney();
        document.getElementById('amt').value = '';
        document.getElementById('item').value = '';
        document.getElementById('receiptImg').value = '';

    } catch (e) {
        console.error(e);
        alert('å‚³é€ç™¼ç”ŸéŒ¯èª¤ï¼š' + e.message);
    } finally {
        btn.innerText = 'ç¢ºèªé€å‡º';
        btn.disabled = false;
    }
}

    // 2. å¤©æ°£é‚è¼¯
    function toggleWeather() {
        const w = document.getElementById('weather-widget');
        w.style.display = (w.style.display === 'none' || w.style.display === '') ? 'block' : 'none';
    }

    const cities = [
        { name: 'æ ¼æ‹‰ç´é”', lat: 37.1773, lon: -3.5986 },
        { name: 'é¾é”', lat: 36.7462, lon: -5.1612 },
        { name: 'å¡ç¶­åˆ©äº', lat: 37.3891, lon: -5.9845 }
    ];

    async function updateWeather() {
        const infoDiv = document.getElementById('weather-info');
        infoDiv.innerHTML = '';
        for (let city of cities) {
            try {
                const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${city.lat}&longitude=${city.lon}&current_weather=true&hourly=precipitation_probability`);
                const data = await response.json();
                const rainProb = data.hourly.precipitation_probability[new Date().getHours()];
                infoDiv.innerHTML += `
                    <div style="font-weight:bold; margin-top:5px; border-bottom:1px solid #eee;">${city.name}</div>
                    <div>ğŸŒ¡ï¸ ${data.current_weather.temperature}Â°C | â˜” ${rainProb}%</div>`;
            } catch (e) { infoDiv.innerHTML += `<div>${city.name}: å¤±æ•—</div>`; }
        }
    }
    updateWeather();
    // 3. è‡ªå‹•å±•é–‹ä»Šå¤©çš„è¡Œç¨‹
function openToday() {
    const today = new Date();
    const dateString = `${today.getMonth() + 1}/${today.getDate()}`; // æ ¼å¼å¦‚ "2/15"
    
    const summaries = document.querySelectorAll('summary');
    summaries.forEach(summary => {
        if (summary.innerText.includes(dateString)) {
            summary.parentElement.open = true;
            // è®“ç•«é¢è‡ªå‹•æ²å‹•åˆ°è©²ä½ç½®
            summary.scrollIntoView({ behavior: 'smooth' });
        }
    });
}
// åŸ·è¡Œè‡ªå‹•å±•é–‹
openToday();
</script>

</body>
</html>































